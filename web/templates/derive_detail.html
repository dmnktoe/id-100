{{define "derive_detail.content"}}
    <main class="detail-container">
        {{if .IsPartial}}<button class="drawer-close" aria-label="close">✕</button>{{end}}

        <header class="detail-header">
            <div class="meta-info">
                <span class="badge-id">#{{printf "%03d" .Derive.Number}}</span>
            </div>
            <h1 class="detail-title">{{.Derive.Title}}</h1>
            <p class="detail-description">{{.Derive.Description}}</p>
        </header>

        <section class="contributions-section">
            <h2 class="section-label">eingereichte beiträge ({{len .Contributions}})</h2>

            <div class="evidence-grid">
                {{range .Contributions}}
                <div class="evidence-card">
                    <div class="evidence-img-wrapper">
                        <img class="lazy blur-up" data-src="{{.ImageUrl}}" data-lqip="{{.ImageLqip}}" src="{{if .ImageLqip}}{{.ImageLqip}}{{else}}data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='6'/>{{end}}" loading="lazy" alt="Beweisfoto">
                    </div>
                    <div class="evidence-meta">
                        <span class="user-tag">{{.UserName}}</span>
                        <span class="date-tag">{{.CreatedAt.Format "02.01.2006"}}</span>
                    </div>
                </div>
                {{else}}
                <div class="empty-state">
                    noch keine beiträge. sei der erste.
                </div>
                {{end}}
            </div>
        </section>

        <footer class="detail-footer">
            <a href="/{{if .PageParam}}?page={{.PageParam}}{{end}}" class="back-link drawer-back-link">← zurück zum index</a>
        </footer>
    </main>
{{end}}